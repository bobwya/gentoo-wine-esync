--- a/0041-server-Allocate-shared-memory-segments-for-semaphore.patch	2018-11-01 17:19:43.000000000 +0000
+++ b/0041-server-Allocate-shared-memory-segments-for-semaphore.patch	2020-04-29 20:41:37.735341552 +0100
@@ -49,14 +49,6 @@
  };
  
  
-@@ -6615,6 +6619,6 @@ union generic_reply
-     struct get_esync_fd_reply get_esync_fd_reply;
- };
- 
--#define SERVER_PROTOCOL_VERSION 571
-+#define SERVER_PROTOCOL_VERSION 572
- 
- #endif /* __WINE_WINE_SERVER_PROTOCOL_H */
 diff --git a/server/esync.c b/server/esync.c
 index 399011ff0b..f1a46afc23 100644
 --- a/server/esync.c
@@ -200,7 +192,7 @@
  #include "wine/library.h"
  
  /* command-line options */
-@@ -141,6 +142,9 @@ int main( int argc, char *argv[] )
+@@ -142,7 +143,10 @@ int main( int argc, char *argv[] )
      sock_init();
      open_master_socket();
  
@@ -208,6 +200,7 @@
 +        esync_init();
 +
      if (debug_level) fprintf( stderr, "wineserver: starting (pid=%ld)\n", (long) getpid() );
+     init_scheduler();
      init_signals();
      init_directories();
 diff --git a/server/protocol.def b/server/protocol.def
