--- a/0025-server-Create-eventfd-descriptors-for-device-manager.patch	2018-11-01 17:19:43.000000000 +0000
+++ b/0025-server-Create-eventfd-descriptors-for-device-manager.patch	2019-12-19 22:35:56.544521195 +0000
@@ -3,19 +3,15 @@
 Date: Sat, 9 Jun 2018 15:39:37 -0500
 Subject: [PATCH 25/83] server: Create eventfd descriptors for device manager
  objects.
-
 We don't have to worry about synchronization here because
 wine_ntoskrnl_main_loop() is only ever called from one thread per winedevice
 process.
-
 This lets drivers like mountmgr finally work, and so winecfg can open the
 Drives tab.
-
 Signed-off-by: Zebediah Figura <z.figura12@gmail.com>
 ---
  server/device.c | 24 +++++++++++++++++++++++-
  1 file changed, 23 insertions(+), 1 deletion(-)
-
 diff --git a/server/device.c b/server/device.c
 index 94309ba112..5c13a839ab 100644
 --- a/server/device.c
@@ -74,10 +70,10 @@
  static void device_manager_destroy( struct object *obj )
  {
      struct device_manager *manager = (struct device_manager *)obj;
-@@ -618,6 +631,9 @@ static void device_manager_destroy( struct object *obj )
-     {
-         struct device *device = LIST_ENTRY( ptr, struct device, entry );
+@@ -687,6 +700,9 @@ static void device_manager_destroy( struct object *obj )
+         grab_object( &device->obj );
          delete_device( device );
+         release_object( &device->obj );
 +
 +        if (do_esync())
 +            close( manager->esync_fd );
@@ -106,4 +102,3 @@
      else set_error( STATUS_PENDING );
 -- 
 2.19.1
-
