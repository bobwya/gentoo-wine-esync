--- a/0015-server-Create-eventfd-file-descriptors-for-process-o.patch	2018-11-01 17:19:43.000000000 +0000
+++ b/0015-server-Create-eventfd-file-descriptors-for-process-o.patch	2019-12-02 20:35:55.995292185 +0000
@@ -3,7 +3,6 @@
 Date: Fri, 8 Jun 2018 18:57:12 -0500
 Subject: [PATCH 15/83] server: Create eventfd file descriptors for process
  objects.
-
 Signed-off-by: Zebediah Figura <z.figura12@gmail.com>
 ---
  server/esync.c   | 33 +++++++++++++++++++++++++++++++++
@@ -12,7 +11,6 @@
  server/process.h |  1 +
  4 files changed, 72 insertions(+), 1 deletion(-)
  create mode 100644 server/esync.h
-
 diff --git a/server/esync.c b/server/esync.c
 index e775b3bd28..f50366a434 100644
 --- a/server/esync.c
@@ -105,8 +103,8 @@
  /* process structure */
  
 @@ -64,6 +65,7 @@ static int process_signaled( struct object *obj, struct wait_queue_entry *entry
- static unsigned int process_map_access( struct object *obj, unsigned int access );
  static void process_poll_event( struct fd *fd, int event );
+ static struct list *process_get_kernel_obj_list( struct object *obj );
  static void process_destroy( struct object *obj );
 +static int process_get_esync_fd( struct object *obj );
  static void terminate_process( struct process *process, struct thread *skip, int exit_code );
@@ -126,9 +124,9 @@
      process->rawinput_mouse  = NULL;
      process->rawinput_kbd    = NULL;
 +    process->esync_fd        = -1;
+     list_init( &process->kernel_object );
      list_init( &process->thread_list );
      list_init( &process->locks );
-     list_init( &process->asyncs );
 @@ -574,6 +577,9 @@ struct process *create_process( int fd, struct process *parent, int inherit_all,
      if (!token_assign_label( process->token, security_high_label_sid ))
          goto error;
@@ -167,13 +165,12 @@
 --- a/server/process.h
 +++ b/server/process.h
 @@ -96,6 +96,7 @@ struct process
-     struct list          rawinput_devices;/* list of registered rawinput devices */
      const struct rawinput_device *rawinput_mouse; /* rawinput mouse device, if any */
      const struct rawinput_device *rawinput_kbd;   /* rawinput keyboard device, if any */
+     struct list          kernel_object;   /* list of kernel object pointers */
 +    int                  esync_fd;        /* esync file descriptor (signaled on exit) */
  };
  
  struct process_snapshot
 -- 
 2.19.1
-
