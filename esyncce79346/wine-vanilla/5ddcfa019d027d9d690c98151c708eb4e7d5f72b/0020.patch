--- a/0020-server-Create-eventfd-file-descriptors-for-thread-ob.patch	2018-11-01 17:19:43.000000000 +0000
+++ b/0020-server-Create-eventfd-file-descriptors-for-thread-ob.patch	2019-11-12 22:02:41.260739323 +0000
@@ -3,25 +3,23 @@
 Date: Fri, 8 Jun 2018 22:04:29 -0500
 Subject: [PATCH 20/83] server: Create eventfd file descriptors for thread
  objects.
-
 Signed-off-by: Zebediah Figura <z.figura12@gmail.com>
 ---
  server/thread.c | 16 +++++++++++++++-
  server/thread.h |  1 +
  2 files changed, 16 insertions(+), 1 deletion(-)
-
 diff --git a/server/thread.c b/server/thread.c
 index f5ad0f066c..722c133847 100644
 --- a/server/thread.c
 +++ b/server/thread.c
 @@ -131,6 +131,7 @@ static const struct object_ops thread_apc_ops =
- 
  static void dump_thread( struct object *obj, int verbose );
+ static struct object_type *thread_get_type( struct object *obj );
  static int thread_signaled( struct object *obj, struct wait_queue_entry *entry );
 +static int thread_get_esync_fd( struct object *obj );
  static unsigned int thread_map_access( struct object *obj, unsigned int access );
  static void thread_poll_event( struct fd *fd, int event );
- static void destroy_thread( struct object *obj );
+ static struct list *thread_get_kernel_obj_list( struct object *obj );
 @@ -143,7 +144,7 @@ static const struct object_ops thread_ops =
      add_queue,                  /* add_queue */
      remove_queue,               /* remove_queue */
@@ -77,13 +75,12 @@
 --- a/server/thread.h
 +++ b/server/thread.h
 @@ -89,6 +89,7 @@ struct thread
-     timeout_t              creation_time; /* Thread creation time */
      timeout_t              exit_time;     /* Thread exit time */
      struct token          *token;         /* security token associated with this thread */
+     struct list            kernel_object; /* list of kernel object pointers */
 +    int                    esync_fd;      /* esync file descriptor (signalled on exit) */
  };
  
  struct thread_snapshot
 -- 
 2.19.1
-
